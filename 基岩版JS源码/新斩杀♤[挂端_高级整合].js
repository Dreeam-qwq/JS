//原版 Digyth
var 物品ID一览表 = "铁锹, id: 256, 特殊值: 0\n铁镐, id: 257, 特殊值: 0\n铁斧, id: 258, 特殊值: 0\n打火石, id: 259, 特殊值: 0\n红苹果, id: 260, 特殊值: 0\n弓, id: 261, 特殊值: 0\n箭, id: 262, 特殊值: 0\n煤炭, id: 263, 特殊值: 0\n木炭, id: 263, 特殊值: 1\n钻石, id: 264, 特殊值: 0\n铁锭, id: 265, 特殊值: 0\n金锭, id: 266, 特殊值: 0\n铁剑, id: 267, 特殊值: 0\n木剑, id: 268, 特殊值: 0\n木锹, id: 269, 特殊值: 0\n木镐, id: 270, 特殊值: 0\n木斧, id: 271, 特殊值: 0\n石剑, id: 272, 特殊值: 0\n石锹, id: 273, 特殊值: 0\n石镐, id: 274, 特殊值: 0\n石斧, id: 275, 特殊值: 0\n钻石剑, id: 276, 特殊值: 0\n钻石锹, id: 277, 特殊值: 0\n钻石镐, id: 278, 特殊值: 0\n钻石斧, id: 279, 特殊值: 0\n木棍, id: 280, 特殊值: 0\n碗, id: 281, 特殊值: 0\n蘑菇汤, id: 282, 特殊值: 0\n金剑, id: 283, 特殊值: 0\n金铲, id: 284, 特殊值: 0\n金镐, id: 285, 特殊值: 0\n金斧, id: 286, 特殊值: 0\n线, id: 287, 特殊值: 0\n羽毛, id: 288, 特殊值: 0\n火药, id: 289, 特殊值: 0\n木锄, id: 290, 特殊值: 0\n石锄, id: 291, 特殊值: 0\n铁锄, id: 292, 特殊值: 0\n钻石锄, id: 293, 特殊值: 0\n金锄, id: 294, 特殊值: 0\n小麦种子, id: 295, 特殊值: 0\n小麦, id: 296, 特殊值: 0\n面包, id: 297, 特殊值: 0\n皮革帽子, id: 298, 特殊值: 0\n皮革外套, id: 299, 特殊值: 0\n皮革裤子, id: 300, 特殊值: 0\n皮革靴子, id: 301, 特殊值: 0\n锁链头盔, id: 302, 特殊值: 0\n锁链胸甲, id: 303, 特殊值: 0\n锁链护腿, id: 304, 特殊值: 0\n锁链靴子, id: 305, 特殊值: 0\n铁头盔, id: 306, 特殊值: 0\n铁胸甲, id: 307, 特殊值: 0\n铁护腿, id: 308, 特殊值: 0\n铁靴子, id: 309, 特殊值: 0\n钻石头盔, id: 310, 特殊值: 0\n钻石胸甲, id: 311, 特殊值: 0\n钻石护腿, id: 312, 特殊值: 0\n钻石靴子, id: 313, 特殊值: 0\n金头盔, id: 314, 特殊值: 0\n金胸甲, id: 315, 特殊值: 0\n金护腿, id: 316, 特殊值: 0\n金靴子, id: 317, 特殊值: 0\n燧石, id: 318, 特殊值: 0\n生猪排, id: 319, 特殊值: 0\n熟猪排, id: 320, 特殊值: 0\n画, id: 321, 特殊值: 0\n告示牌, id: 323, 特殊值: 0\n木门, id: 324, 特殊值: 0\n桶, id: 325, 特殊值: 0\n牛奶桶, id: 325, 特殊值: 1\n水桶, id: 325, 特殊值: 8\n岩浆桶, id: 325, 特殊值: 10\n矿车, id: 328, 特殊值: 0\n鞍, id: 329, 特殊值: 0\n铁门, id: 330, 特殊值: 0\n红石, id: 331, 特殊值: 0\n雪球, id: 332, 特殊值: 0\n皮革, id: 334, 特殊值: 0\n红砖, id: 336, 特殊值: 0\n粘土, id: 337, 特殊值: 0\n甘蔗, id: 338, 特殊值: 0\n纸, id: 339, 特殊值: 0\n书, id: 340, 特殊值: 0\n粘液球, id: 341, 特殊值: 0\n蛋, id: 344, 特殊值: 0\n指南针, id: 345, 特殊值: 0\n钟, id: 347, 特殊值: 0\n萤石粉, id: 348, 特殊值: 0\n墨囊（染料）, id: 351, 特殊值: 0\n玫瑰红（染料）, id: 351, 特殊值: 1\n仙人掌绿（染料）, id: 351, 特殊值: 2\n可可豆（染料）, id: 351, 特殊值: 3\n青金石（染料）, id: 351, 特殊值: 4\n紫色染料, id: 351, 特殊值: 5\n青色染料, id: 351, 特殊值: 6\n淡灰色染料, id: 351, 特殊值: 7\n灰色染料, id: 351, 特殊值: 8\n粉红色染料, id: 351, 特殊值: 9\n黄绿色染料, id: 351, 特殊值: 10\n蒲公英黄（染料）, id: 351, 特殊值: 11\n淡蓝色染料, id: 351, 特殊值: 12\n品红色染料, id: 351, 特殊值: 13\n橙色染料, id: 351, 特殊值: 14\n骨粉, id: 351, 特殊值: 15\n骨头, id: 352, 特殊值: 0\n糖, id: 353, 特殊值: 0\n蛋糕, id: 354, 特殊值: 0\n床, id: 355, 特殊值: 0\n饼干, id: 357, 特殊值: 0\n剪刀, id: 359, 特殊值: 0\n西瓜片, id: 360, 特殊值: 0\n南瓜种子, id: 261, 特殊值: 0\n西瓜种子, id: 362, 特殊值: 0\n生牛肉, id: 363, 特殊值: 0\n牛排, id: 364, 特殊值: 0\n生鸡肉, id: 365, 特殊值: 0\n熟鸡肉, id: 366, 特殊值: 0\n绿宝石, id: 388, 特殊值: 0\n胡萝卜, id: 391, 特殊值: 0\n马铃薯, id: 392, 特殊值: 0\n烤马铃薯, id: 393, 特殊值: 0\n南瓜派, id: 400, 特殊值: 0\n地狱砖, id: 405, 特殊值: 0\n地狱石英, id: 406, 特殊值: 0\n甜菜, id: 457, 特殊值: 0\n甜菜种子, id: 458, 特殊值: 0\n甜菜汤, id: 459, 特殊值: 0\n弩, id:471,特殊值:0\n隐身药水,id:373,特殊值:8\n附魔苹果,id:466,特殊值:0\n鞘翅,id:444,特殊值:0\n复活图腾,id:450,特殊值:0\n海龟壳,id:469,特殊值:0\n三叉戟,id:455,特殊值:0\n栓绳,id:420,特殊值:0\n唱片,id:500-511,特殊值:0\n烟花,id:401,特殊值:0\n脚手架,id:-165,特殊值:0\n唱片机,id:84,特殊值:0\n音符盒,id:25,特殊值:0\n地图,id:395,特殊值:0\n定位地图,id:395,特殊值:2\n头颅模型,id:397,特殊值:0-5\n书与笔,id:386,特殊值:0\nTNT蛋,id:383,特殊值:65\n凋零蛋,id:383,特殊值:52\n末影龙蛋,id:383,特殊值:53\n龙息蛋,id:383,特殊值:79\n闪电蛋,id:383,特殊值:93\n凋零炸弹,id:383,特殊值:89\n大火焰弹,id:383,特殊值: 85\n小火焰弹,id:383,特殊值:94\n铁傀儡蛋,id:383,特殊值:20\n雪傀儡蛋,id:383,特殊值:21\n黑紫棒,id:166,特殊值:0\n手持物品栏,id:456,特殊值:0\n若还有好玩有用的id特殊值请反馈山海QQ:1750520500"
var 方块ID一览表 = "石头, id: 1, 特殊值: 0\n花岗岩, id: 1, 特殊值: 1\n光滑的花岗岩, id: 1, 特殊值: 2\n闪长岩, id: 1, 特殊值: 3\n光滑的闪长岩, id: 1, 特殊值: 4\n安山岩, id: 1, 特殊值: 5\n光滑的安山岩, id: 1, 特殊值: 6\n草方块, id: 2, 特殊值: 0\n泥土, id: 3, 特殊值: 0\n圆石, id: 4, 特殊值: 0\n木板, id: 5, 特殊值: 0\n松木板, id: 5, 特殊值: 1\n桦木板, id: 5, 特殊值: 2\n丛林木板, id: 5, 特殊值: 3\n金合欢木板, id: 5, 特殊值: 4\n黑橡木木板, id: 5, 特殊值: 5\n树苗, id: 6, 特殊值: 0\n松树苗, id: 6, 特殊值: 1\n桦树苗, id: 6, 特殊值: 2\n丛林树苗, id: 6, 特殊值: 3\n金合欢树苗, id: 6, 特殊值: 4\n黑橡树苗, id: 6, 特殊值: 5\n基岩, id: 7, 特殊值: 0\n水, id: 8, 特殊值: 0\n静止的水, id: 9, 特殊值: 0\n岩浆, id: 10, 特殊值: 0\n静止的岩浆, id: 11, 特殊值: 0\n沙子, id: 12, 特殊值: 0\n红沙, id: 12, 特殊值: 1\n砂砾, id: 13, 特殊值: 0\n金矿石, id: 14, 特殊值: 0\n铁矿石, id: 15, 特殊值: 0\n煤矿石, id: 16, 特殊值: 0\n木头, id: 17, 特殊值: 0\n松木, id: 17, 特殊值: 1\n桦木, id: 17, 特殊值: 2\n丛林木, id: 17, 特殊值: 3\n树叶, id: 18, 特殊值: 0\n松树叶, id: 18, 特殊值: 1\n桦树叶, id: 18, 特殊值: 2\n丛林树叶, id: 18, 特殊值: 3\n海绵, id: 19, 特殊值: 0\n玻璃, id: 20, 特殊值: 0\n青金石矿石, id: 21, 特殊值: 0\n青金石块, id: 22, 特殊值: 0\n沙石, id: 24, 特殊值: 0\n錾制沙石, id: 24, 特殊值: 1\n平滑沙石, id: 24, 特殊值: 2\n动力铁轨, id: 27, 特殊值: 0\n蜘蛛网, id: 30, 特殊值: 0\n草, id: 31, 特殊值: 1\n灌木, id: 31, 特殊值: 2\n枯死的灌木, id: 32, 特殊值: 0\n白色羊毛, id: 35, 特殊值: 0\n橙色羊毛, id: 35, 特殊值: 1\n品红色羊毛, id: 35, 特殊值: 2\n淡蓝色羊毛, id: 35, 特殊值: 3\n黄色羊毛, id: 35, 特殊值: 4\n黄绿色羊毛, id: 35, 特殊值: 5\n粉红色羊毛, id: 35, 特殊值: 6\n灰色羊毛, id: 35, 特殊值: 7\n淡灰色羊毛, id: 35, 特殊值: 8\n青色羊毛, id: 35, 特殊值: 9\n紫色羊毛, id: 35, 特殊值: 10\n蓝色羊毛, id: 35, 特殊值: 11\n棕色羊毛, id: 35, 特殊值: 12\n绿色羊毛, id: 35, 特殊值: 13\n红色羊毛, id: 35, 特殊值: 14\n黑色羊毛, id: 35, 特殊值: 15\n蒲公英, id: 37, 特殊值: 0\n罂粟, id: 38, 特殊值: 0\n蓝色的兰花, id: 38, 特殊值: 1\n露西球, id: 38, 特殊值: 2\n矢车菊, id: 38, 特殊值: 3\n红郁金香, id: 38, 特殊值: 4\n橙郁金香, id: 38, 特殊值: 5\n白郁金香, id: 38, 特殊值: 6\n粉郁金香, id: 38, 特殊值: 7\n雏菊, id: 38, 特殊值: 8\n棕色蘑菇, id: 39, 特殊值: 0\n红色蘑菇, id: 40, 特殊值: 0\n金块, id: 41, 特殊值: 0\n铁块, id: 42, 特殊值: 0\n石台阶, id: 44, 特殊值: 0\n沙石台阶, id: 44, 特殊值: 1\n圆石台阶, id: 44, 特殊值: 3\n砖台阶, id: 44, 特殊值: 4\n石砖台阶, id: 44, 特殊值: 5\n石英台阶, id: 44, 特殊值: 7\n砖块, id: 45, 特殊值: 0\nTNT, id: 46, 特殊值: 0\n书架, id: 47, 特殊值: 0\n苔石, id: 48, 特殊值: 0\n黑曜石, id: 49, 特殊值: 0\n火把, id: 50, 特殊值: 0\n火, id: 51, 特殊值: 0\n刷怪笼, id: 52, 特殊值: 0\n木楼梯, id: 53, 特殊值: 0\n箱子, id: 54, 特殊值: 0\n钻石矿石, id: 56, 特殊值: 0\n钻石块, id: 57, 特殊值: 0\n工作台, id: 58, 特殊值: 0\n耕地, id: 60, 特殊值: 0\n熔炉, id: 61, 特殊值: 0\n梯子, id: 65, 特殊值: 0\n铁轨, id: 66, 特殊值: 0\n石楼梯, id: 67, 特殊值: 0\n红石矿石, id: 73, 特殊值: 0\n雪, id: 78, 特殊值: 0\n冰, id: 79, 特殊值: 0\n雪块, id: 80, 特殊值: 0\n仙人掌, id: 81, 特殊值: 0\n粘土块, id: 82, 特殊值: 0\n木栅栏, id: 85, 特殊值: 0\n南瓜, id: 86, 特殊值: 0\n地狱岩, id: 87, 特殊值: 0\n萤石, id: 89, 特殊值: 0\n南瓜灯, id: 91, 特殊值: 0\n隐形基岩, id: 95, 特殊值: 0\n活板门, id: 96, 特殊值: 0\n石砖, id: 98, 特殊值: 0\n苔石砖, id: 98, 特殊值: 1\n裂石砖, id: 98, 特殊值: 2\n回形石砖, id: 98, 特殊值: 3\n棕色蘑菇方块, id: 99, 特殊值: 14\n红色蘑菇方块, id: 100, 特殊值: 14\n蘑菇方块, id: 99, 特殊值: 0\n蘑菇茎, id: 99, 特殊值: 15\n铁栅栏, id: 101, 特殊值: 0\n玻璃板, id: 102, 特殊值: 0\n西瓜, id: 103, 特殊值: 0\n南瓜梗, id: 104, 特殊值: 0\n西瓜梗, id: 105, 特殊值: 0\n藤蔓, id: 106, 特殊值: 0\n栅栏门, id: 107, 特殊值: 0\n砖楼梯, id: 108, 特殊值: 0\n石砖楼梯, id: 109, 特殊值: 0\n菌丝, id: 110, 特殊值: 0\n莲叶, id: 111, 特殊值: 0\n地狱砖, id: 112, 特殊值: 0\n地狱砖楼梯, id: 114, 特殊值: 0\n末地传送门, id: 120, 特殊值: 0\n末地石, id: 121, 特殊值: 0\n可可梗, id: 127, 特殊值: 0\n沙石楼梯, id: 128, 特殊值: 0\n绿宝石矿石, id: 129, 特殊值: 0\n绿宝石块, id: 133, 特殊值: 0\n松木楼梯, id: 134, 特殊值: 0\n桦木楼梯, id: 135, 特殊值: 0\n丛林楼梯, id: 136, 特殊值: 0\n圆石墙, id: 139, 特殊值: 0\n苔石墙, id: 139, 特殊值: 1\n石英方块, id: 155, 特殊值: 0\n錾石英方块, id: 155, 特殊值: 1\n柱石英方块, id: 155, 特殊值: 2\n石英楼梯, id: 156, 特殊值: 0\n木台阶, id: 158, 特殊值: 0\n松木台阶, id: 158, 特殊值: 1\n桦木台阶, id: 158, 特殊值: 2\n丛林木台阶, id: 158, 特殊值: 3\n金合欢木台阶, id: 158, 特殊值: 4\n黑橡木台阶, id: 158, 特殊值: 5\n白色粘土, id: 159, 特殊值: 0\n橙色粘土, id: 159, 特殊值: 1\n品红色粘土, id: 159, 特殊值: 2\n淡蓝色粘土, id: 159, 特殊值: 3\n黄色粘土, id: 159, 特殊值: 4\n黄绿色粘土, id: 159, 特殊值: 5\n粉红色粘土, id: 159, 特殊值: 6\n灰色粘土, id: 159, 特殊值: 7\n淡灰色粘土, id: 159, 特殊值: 8\n青色粘土, id: 159, 特殊值: 9\n紫色粘土, id: 159, 特殊值: 10\n蓝色粘土, id: 159, 特殊值: 11\n棕色粘土, id: 159, 特殊值: 12\n绿色粘土, id: 159, 特殊值: 13\n红色粘土, id: 159, 特殊值: 14\n黑色粘土, id: 159, 特殊值: 15\n金合欢树叶, id: 161, 特殊值: 0\n黑橡木叶, id: 161, 特殊值: 1\n金合欢木, id: 162, 特殊值: 0\n黑橡木, id: 162, 特殊值: 1\n金合欢木楼梯, id: 163, 特殊值: 0\n黑橡木楼梯, id: 164, 特殊值: 0\n干草块, id: 170, 特殊值: 0\n白色地毯, id: 171, 特殊值: 0\n橙色地毯, id: 171, 特殊值: 1\n品红色地毯, id: 171, 特殊值: 2\n淡蓝色地毯, id: 171, 特殊值: 3\n黄色地毯, id: 171, 特殊值: 4\n黄绿色地毯, id: 171, 特殊值: 5\n粉红色地毯, id: 171, 特殊值: 6\n灰色地毯, id: 171, 特殊值: 7\n淡灰色地毯, id: 171, 特殊值: 8\n青色地毯, id: 171, 特殊值: 9\n紫色地毯, id: 171, 特殊值: 10\n蓝色地毯, id: 171, 特殊值: 11\n棕色地毯, id: 171, 特殊值: 12\n绿色地毯, id: 171, 特殊值: 13\n红色地毯, id: 171, 特殊值: 14\n黑色地毯, id: 171, 特殊值: 15\n硬化粘土, id: 172, 特殊值: 0\n煤炭块, id: 173, 特殊值: 0\n浮冰（不知和冰有何区别）, id: 174, 特殊值: 0\n太阳花, id: 175, 特殊值: 0\n丁香花, id: 175, 特殊值: 1\n高草, id: 175, 特殊值: 2\n高大灌木, id: 175, 特殊值: 3\n玫瑰丛, id: 175, 特殊值: 4\n芍药, id: 175, 特殊值: 5\n灰化土, id: 243, 特殊值: 0\n切石机, id: 245, 特殊值: 0\n发光的黑曜石, id: 246, 特殊值: 0\n下界反应核, id: 247, 特殊值: 0\n更新方块1, id: 248, 特殊值: 0\n更新方块2, id: 249, 特殊值: 0"
    //本js免费，禁止倒卖
var ctx = com.mojang.minecraftpe.MainActivity.currentMainActivity.get(),
    wg = android.widget,
    app = android.app,
    wid = ctx.getWindowManager().getDefaultDisplay().getWidth(),
    hei = ctx.getWindowManager().getDefaultDisplay().getHeight(),
    gravity = android.view.Gravity,
    left = gravity.LEFT,
    top = gravity.TOP,
    right = gravity.RIGHT,
    bottom = gravity.BOTTOM,
    center = gravity.CENTER,
    mainView = ctx.getWindow().getDecorView(),
    view = android.view,
    grap = android.graphics,
    lang = java.lang,
    util = android.util,
    io = java.io,
    interface = android.content.DialogInterface,
    root = android.os.Environment.getExternalStorageDirectory().getAbsolutePath(),
    iniPath = root + "/games/com.mojang",
    iniName = "-049592568.ini",
    shield = ["闪电侠", "超级跳跃", "末影使者", "点我使用展示功能", "跳跃信标", "entity"];
var radarPic = grap.Bitmap.createBitmap(hei / 3, hei / 3, grap.Bitmap.Config.ARGB_8888),
    radarShow, radarWin, state = 0,
    lenZ = radarPic.getWidth(),
    lenX = radarPic.getHeight(),
    radius = lenZ / 30,
    speeding = false,
    running = false,
    players, flashing = false,
    home = null,
    getMessage, mode = false;
var enchId = {
    耐久: Enchantment.UNBREAKING,
    锋利: Enchantment.SHARPNESS,
    火焰附加: Enchantment.FIRE_ASPECT,
    击退: Enchantment.KNOCKBACK,
    力量: Enchantment.POWER,
    冲击: Enchantment.PUNCH,
    火矢: Enchantment.FLAME,
    无限: Enchantment.INFINITY,
    保护: Enchantment.PROTECTION,
    荆棘: Enchantment.THORNS,
    火焰保护: Enchantment.FIRE_PROTECTION,
    掉落保护: Enchantment.FEATHER_FALLING,
    爆炸保护: Enchantment.BLAST_PROTECTION,
    弹射物保护: Enchantment.PROJECTILE_PROTECTION,
    水下呼吸: Enchantment.RESPIRATION,
    深海探索者: Enchantment.AQUA_AFFINITY,
    水下速掘: Enchantment.DEPTH_STRIDER,
    亡灵杀手: Enchantment.SMITE,
    节肢杀手: Enchantment.BANE_OF_ARTHROPODS,
    抢夺: Enchantment.LOOTING,
    效率: Enchantment.EFFICIENCY,
    精准采集: Enchantment.SILK_TOUCH,
    时运: Enchantment.FORTUNE,
    海之眷顾: Enchantment.LUCK_OF_THE_SEA,
    钓饵: Enchantment.LURE

}


if (!running) {
    running = true;
    Ui(function() {
        var win = new wg.PopupWindow(ctx);
        //    var lay1=new wg.LinearLayout(ctx);
        var lay = new wg.LinearLayout(ctx);
        var cx = 0;
        aa = NewView("LL", H() * 0.1, H() * 0.1, "CC", 1, 1, "#FFFF4520", 90, anniu);
        cc = NewText("开启", "CC", null, "#FFF00F");
        aa.addView(cc);
        bb = NewCDV(2, "#FFdaFF11", null, aa, H() * 0.1, H() * 0.1, false, true, "RT", W() / 8, 0);

        function anniu() {
                try {
                    Ui(function() {
                        bb.dismiss();
                        if (cx == 0) {
                            cx = 1;
                            showTip("欢迎加入小米网络，群聊号码：739478682");
                            b1 = addButton(lay, "飞行", fly, null, 10, 15);
                            b2 = addButton(lay, "急迫", rapid, removeRapid, 0, 15);
                            b3 = addButton(lay, "暗杀", flash, null, 0, 15);
                            b4 = addButton(lay, "回家", goHome, setHome, 0, 15);
                            b5 = addButton(lay, "变速", speed, null, 0, 15);
                            b6 = addButton(lay, "高跳", jump, removeJump, 0, 15)
                            b7 = addButton(lay, "夜视", vision, removeVision, 0, 15);
                            b8 = addButton(lay, "雷达", radar, getNames, 0, 15);
                            b9 = addButton(lay, "附魔", enchant, null, 0, 15);
                            b10 = addButton(lay, "经验", exp, null, 0, 15);
                            b11 = addButton(lay, "加载", File_Select, null, 0, 15);
                            b12 = addButton(lay, "物品", 添加物品, null, 0, 15);
                            win.setWidth(W() / 9 * 3);
                            win.setHeight(H() / 9);
                            // lay.setBackgroundDrawable(roundBG("#ffeb86ff",10));
                            // b1.setBackgroundDrawable(getColorDrawable("transparent"));
                            win.setContentView(scroll(lay, true));
                            win.setBackgroundDrawable(getColorDrawable("transparent"));
                            win.showAtLocation(mainView, right | top, W() / 10, 0);
                        } else {
                            Ui(function() {
                                try {
                                    cx = 0;
                                } catch (err) {}
                            });
                        }
                    });
                } catch (err) {
                    print(err);
                }
            } //functionanniu
    });
}




function invalidate() {
    try {
        if (mode) {
            players = Array.slice.call(Server.getAllPlayers());
            players.shift();
        } else {
            var ls = [];
            for (var i = 0; i <= 10000; i++)
                if (Entity.getEntityTypeId(i) == 63)
                    ls.push(i);
            players = ls;
        }
        var arr = []
        for (var i in players)
            if (shield.indexOf(Player.getName(players[i])) > -1) arr.unshift(i);
        for (var i in arr) players.splice(arr[i], 1);
    } catch (err) {
        showTip(err, 1);
    }
}

function fly() {
    Entity.setPosition(getPlayerEnt(), Player.getX(), Player.getY() + 2, Player.getZ());
    Player.setFlying(true);
    clientMessage("¥您已开启飞行");
}

function rapid() {
    Entity.addEffect(Player.getEntity(), 3, 3276799, 255);
    showTip(" ➡已开启速掘，长按解除效果");
}

function vision() {
    Entity.addEffect(Player.getEntity(), 16, 3276799, 1);
    showTip(" ➡已开启夜视，长按解除效果");
}

function speed() {
    if (speeding) {
        ModPE.setGameSpeed(20);
        showTip(" ➡已恢复，再次点击加速");
    } else {
        ModPE.setGameSpeed(100);
        showTip(" ➡已加速，再次点击恢复");
    }
    speeding = !speeding;
}

function jump() {
    Entity.addEffect(Player.getEntity(), 8, 3276799, 4);
    showTip(" ➡已开启高跳，长按解除效果");
}

function removeRapid() {
    Entity.removeEffect(Player.getEntity(), 3);
    return true;
}

function removeVision() {
    Entity.removeEffect(Player.getEntity(), 16);
    return true;
}

function removeJump() {
    Entity.removeEffect(Player.getEntity(), 8);
    return true;
}

function searchMode(v, c) {
    mode = c;
}

function exp() {
    showDialog("增加经验值", "请输入要增加的经验值", "999999", {
        txt: "确定",
        command: function() {
            try {
                Player.addExp(Number(getMessage.getText()));
            } catch (err) {
                showTip(err);
            }
        }
    }, {
        txt: "取消"
    }, null, true);
}


function flash() {
    try {
        if (flashing) {
            flashing = false;
        } else {
            Ui(function() {
                var dialog = new app.AlertDialog.Builder(ctx);
                dialog.setTitle("                 ⚔ 请选择附身对象 ⚔");
                var lay = new wg.LinearLayout(ctx);
                lay.setOrientation(1);
                var check = addCheckBox(lay, "     勾选360º暗杀 / 不勾选锁定背后 ", function() {}, 0, 15, false);
                invalidate();
                for (var i in players) {
                    addButton(lay, Player.getName(players[i]), eval("function(){startFlash(" + String(players[i]) + "," + String(check.isChecked()) + ");}"), null, {
                        wid: -1
                    }, 15);
                }
                dialog.setView(scroll(lay));
                dialog.setNegativeButton("取消", null);
                dialog.show();
            });
        }
    } catch (err) {
        showTip(err, 1);
    }
}

function startFlash(player, flashMode) {
    showTip(" ➡暗杀开始，如需停止请再次点击按钮", 1);
    runThread(function() {
        try {
            flashing = true;
            while (flashing) {
                invalidate();
                if (players.indexOf(player) == -1 || Entity.getY(player) == 0) {
                    flashing = false;
                    showTip(" ➡暗杀目标已死亡，暗杀任务已结束");
                    break;
                }
                var yaw;
                var wttime;
                if (flashMode) {
                    yaw = Math.random() * 360 - 180;
                    wttime = 300;
                } else {
                    yaw = Entity.getYaw(player) - 180;
                    wttime = 10;
                }
                var pointX = Entity.getX(player) - Math.sin(yaw * Math.PI / 180) * 2,
                    pointY = Entity.getY(player) + 0.5,
                    pointZ = Entity.getZ(player) + Math.cos(yaw * Math.PI / 180) * 2;
                Entity.setRot(Player.getEntity(), yaw + 180, 30);
                Entity.setPosition(Player.getEntity(), pointX, pointY, pointZ);
                //    clientMessage(Entity.getY(player));
                lang.Thread.sleep(wttime);
            }
        } catch (err) {
            showTip(err, 1);
        }
    });
}



function setHome() {
    home = {
        x: Player.getX(),
        y: Player.getY() + 1,
        z: Player.getZ()
    };
    showTip(" ➡设置家成功");
    return true;
}

function goHome() {
    home ? Entity.setPosition(Player.getEntity(), home.x, home.y, home.z) : showTip(" ➡请先长按设置此处为家");
}

function enchant() {
    ctx.runOnUiThread(new java.lang.Runnable({
        run: function() {
            try {
                A1();
                Entity.addEffect(getPlayerEnt(), 5, 2400, 4, false, false);
                Entity.addEffect(getPlayerEnt(), 10, 2400, 4, false, false);
                Entity.addEffect(getPlayerEnt(), 11, 2400, 4, false, false);
                Entity.addEffect(getPlayerEnt(), 3, 2400, 9, false, false);


            } catch (err) {
                print(err)
            }
        }
    }));
}

function radar() {
    try {
        if (radarWin) {
            if (radarWin.isShowing()) {
                state = 2;
                radarWin.dismiss();
            } else if (state == 3) {
                radarWin.showAtLocation(mainView, right | top, 0, hei / 7);
                state = 1;
                scan();
            }
        } else {
            Ui(function() {
                radarWin = new wg.PopupWindow(ctx);
                radarShow = new wg.ImageView(ctx);
                radarShow.setImageBitmap(radarPic);
                radarWin.setContentView(radarShow);
                radarWin.setWidth(radarPic.getWidth());
                radarWin.setHeight(radarPic.getHeight());
                radarWin.setBackgroundDrawable(getColorDrawable("dkgray"));
                radarWin.showAtLocation(mainView, right | top, 0, hei / 7);
                state = 1;
                scan();
            });
            showTip(" ➡雷达已开启，再次点击关闭，长按显示所有人名称与距离", 1);
        }
    } catch (err) {
        print(err);
    }
}

function runThread(func) {
    var a = new java.lang.Thread(new java.lang.Runnable({
        run: func
    }));
    a.start();
    return a;
}

function thread(func) {
    var a = new java.lang.Thread(new java.lang.Runnable({
        run: func
    }));
    return a;
}

function showTip(text, show) {
    Ui(function() {
        var toast = wg.Toast.makeText(ctx, String(text), show ? show : 0);
        toast.show();
    });
}

function getNames() {
    var arr = [],
        x = Player.getX(),
        y = Player.getY(),
        z = Player.getZ();
    invalidate();
    for (var i in players) arr.push(Player.getName(players[i]) + "--" + Math.round(gougu(x - Entity.getX(players[i]), y - Entity.getY(players[i]), z - Entity.getZ(players[i]))));
    showDialog("所有玩家名", "若在游戏房间外使用，则列表不会正确显示", arr.join("\n"), {
        txt: "关闭"
    });
    return true;
}

function showDialog(title, message, text, negative, positive, neutral, uncancel) {
    Ui(function() {
        try {
            var dialog = new app.AlertDialog.Builder(ctx);
            dialog.setTitle(title);
            var scroll = new wg.ScrollView(ctx);
            if (typeof(text) == "string") {
                getMessage = new wg.EditText(ctx);
                getMessage.setText(text);
                scroll.addView(getMessage);
            } else if (typeof(text) == "object") {
                scroll.addView(text);
            }
            dialog.setView(scroll);
            if (negative) dialog.setNegativeButton(negative.txt ? negative.txt : "", negative.command ? negative.command : null);
            if (positive) dialog.setPositiveButton(positive.txt ? positive.txt : "", positive.command ? positive.command : null);
            if (neutral) dialog.setNeutralButton(neutral.txt ? neutral.txt : "", neutral.command ? neutral.command : null);
            dialog.setMessage(message);
            dialog.setCancelable(uncancel ? false : true);
            dialog.show();
        } catch (err) {
            showTip(err, 1)
        }
    });
    return true;
}

function addCheckBox(parent, text, command, ave, size, checked) {
    try {
        var check = new wg.CheckBox(ctx);
        check.setText(text ? text : "");
        check.setChecked(checked ? checked : false);
        if (size) check.setTextSize(size);
        if (command) check.setOnCheckedChangeListener(new wg.CompoundButton.OnCheckedChangeListener({
            onCheckedChanged: command
        }));
        aveLayout(check, typeof(ave) == "number" ? ave : ave.type, ave.wid, ave.hei);
        parent.addView(check);
        return check;
    } catch (err) {
        print(err)
    }
}

function aveLayout(view, ave, width, height, weight) {
    switch (ave) {
        case 1:
            view.setLayoutParams(new wg.RelativeLayout.LayoutParams(width ? width : -2, height ? height : -2, weight ? weight : 1));
            return view;
        default:
            view.setLayoutParams(new wg.LinearLayout.LayoutParams(width ? width : -2, height ? height : -2, weight ? weight : 1));
            return view;
    }
}

function Ui(command) {
    ctx.runOnUiThread(new java.lang.Runnable({
        run: command
    }));
}

function getColorDrawable(color) {
    return new grap.drawable.ColorDrawable(getColor(color));
}

function getColor(color) {
    return eval("grap.Color." + color.toUpperCase());
}

function scan() {
    runThread(function() {
        abc: while (1) {
            try {
                if (state == 1) {
                    var x = Player.getX(),
                        z = Player.getZ();
                    invalidate();
                    if (players.length > 0) {
                        var scaleX = null,
                            scaleZ = null;
                        for (var i in players) {
                            if (state == 2) break abc;
                            var ls = Math.abs(x - Entity.getX(players[i]));
                            if (scaleX == null || ls > scaleX) {
                                scaleX = ls;
                            }
                            ls = Math.abs(z - Entity.getZ(players[i]));
                            if (scaleZ == null || ls > scaleZ) {
                                scaleZ = ls;
                            }
                        }
                        var distX = scaleX * 10 / 9,
                            distZ = scaleZ * 10 / 9,
                            baseX = x - distX,
                            baseZ = z - distZ,
                            ratioX = lenX / 2 / distX,
                            ratioZ = lenZ / 2 / distZ;
                        for (var i in players) {
                            if (state == 2) break abc;
                            var name = Player.getName(players[i]),
                                color = name.length > 3 && name.substr(0, 1) == "§" && getColorValue(name.substr(3, 1)) ? getColorValue(name.substr(3, 1)) : grap.Color.WHITE,
                                actX = lenX - Math.abs(Entity.getX(players[i]) - baseX) * ratioX,
                                actZ = Math.abs(Entity.getZ(players[i]) - baseZ) * ratioZ;
                            draw(actZ, actX, color);
                            drawPoint(players[i], actZ, actX, color);
                        }
                    }
                    draw(lenZ / 2, lenX / 2, grap.Color.MAGENTA);
                    drawPoint(Player.getEntity(), lenZ / 2, lenX / 2, grap.Color.MAGENTA);
                    Ui(function() {
                        radarShow.setImageBitmap(radarPic);
                        radarPic = grap.Bitmap.createBitmap(lenZ, lenX, grap.Bitmap.Config.ARGB_8888);
                    });
                } else {
                    break;
                }
                java.lang.Thread.sleep(1000);
            } catch (err) {
                showTip(err, 1);
                break;
            }
        }
        state = 3;
        Ui(function() {
            if (radarWin.isShowing()) radarWin.dismiss();
        });
    });
}

function draw(x, y, color) {
    var canvas = new grap.Canvas(radarPic);
    var paint = getPaint({
        color: color,
        dither: true
    });
    canvas.drawCircle(x, y, radius, paint);
}

function drawPoint(player, x, y, color) {
    var ratio = Math.PI / 180,
        yaw = Entity.getYaw(player);
    var x0 = radius * 1.3 * Math.cos(yaw * ratio),
        y0 = radius * 1.3 * Math.sin(yaw * ratio),
        x1 = x0 + radius * Math.cos((yaw - 90) * ratio),
        y1 = y0 + radius * Math.sin((yaw - 90) * ratio),
        x2 = x0 + radius * Math.cos((yaw + 90) * ratio),
        y2 = y0 + radius * Math.sin((yaw + 90) * ratio),
        x3 = x0 * 2,
        y3 = y0 * 2;
    var canvas = new grap.Canvas(radarPic);
    var paint = getPaint({
        color: color,
        dither: true,
        style: grap.Paint.Style.FILL
    });
    var path = new grap.Path();
    path.moveTo(x + x3, y + y3);
    path.lineTo(x + x1, y + y1);
    path.lineTo(x + x2, y + y2);
    path.close();
    canvas.drawPath(path, paint);
}

function gougu() {
    if (arguments.length <= 3) {
        var result = 0;
        for (var i in arguments) {
            result += arguments[i] * arguments[i];
        }
        return Math.sqrt(result);
    } else {
        return null;
    }
}

function scroll(view, horizontal) {
    var scrollView = horizontal ? new wg.HorizontalScrollView(ctx) : new wg.ScrollView(ctx);
    scrollView.addView(view);
    return scrollView;
}

function getColorValue(str) {
    switch (str) {
        case "红":
            return grap.Color.RED;
        case "黄":
            return grap.Color.YELLOW;
        case "蓝":
            return grap.Color.BLUE;
        case "绿":
            return grap.Color.GREEN;
        case "青":
            return grap.Color.CYAN;
        case "紫":
            return grap.Color.rgb(160, 32, 240);
        case "灰":
            return grap.Color.GRAY;
        case "白":
            return grap.Color.WHITE;
        case "黑":
            return grap.Color.BLACK;
        case "橙":
            return grap.Color.rgb(255, 165, 0);
        default:
            return null;
    }
}

function getPaint(fields) {
    var paint = new grap.Paint();
    if (fields.color) paint.setColor(fields.color);
    if (fields.dither) paint.setDither(fields.dither);
    if (fields.antiAlias) paint.setAntiAlias(fields.antiAlias);
    if (fields.shader) paint.setShader(fields.shader);
    if (fields.width) paint.setStrokeWidth(fields.width);
    if (fields.style) paint.setStyle(fields.style);
    return paint;
}

function addButton(parent, text, command, longCommand, ave, size) {
    try {
        var button = new wg.Button(ctx);
        button.setBackgroundDrawable(roundBG("#ff14d9ff", 10));
        button.setText(text ? text : "");
        if (size) button.setTextSize(1, size);
        button.setTextColor(android.graphics.Color.parseColor("#ffffff"));
        if (command) button.setOnClickListener(new view.View.OnClickListener({
            onClick: command
        }));
        if (longCommand) button.setOnLongClickListener(new view.View.OnLongClickListener({
            onLongClick: longCommand
        }));
        aveLayout(button, typeof(ave) == "number" ? ave : ave.type, ave.wid, ave.hei);
        parent.addView(button);
        return button;
    } catch (err) {
        print(err)
    }
}

//文件读取函数
function readtext(re) {
    if (new java.io.File(re).exists()) {
        var bu = new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(re)));
        var data = '';
        var vv = bu.readLine();
        while (vv != 'END' && vv != null) {
            data += vv + '\n';
            vv = bu.readLine()
        }
        return String(data)
    } else {
        return ''
    }
}


//文件选择器
function File_Select(Default_Path) {
    var File = new java.io.File("storage/emulated/0/tencent/QQfile_recv/");
    var File_Folder = File.getAbsolutePath().toString();
    var ctx = com.mojang.minecraftpe.MainActivity.currentMainActivity.get();
    if (File.exists() && File.isDirectory()) {
        UI(File_Folder_List(File));
    } else {
        print("无法打开路径" + Default_Path);
    }

    function File_Folder_List(file) {
        var arr = new Array();
        var list = file.listFiles();
        if (list == null) {
            arr[0] = "/...";
        } else {
            for (var i = 0; i < list.length; i++) {
                arr[i] = list[i].getName().toString();
            }
            arr.sort();
            arr.unshift("/...");
        }
        return arr;
    }

    function File_Folder_Selected(path) {
        var file = new java.io.File(path);
        if (!file.exists()) {
            print("路径不存在！" + path);
        } else if (file.isDirectory()) {
            UI(File_Folder_List(file));
        } else if (file.isFile()) {
            try {
                clientMessage("暗杀提示：正在加载中...");
                eval(readtext(path));
            } catch (e) {
                showTip("加载失败");
            }
        }
    }

    function File_Selected(path) {

    }

    function UI(data) {
        ctx.runOnUiThread(new java.lang.Runnable({
            run: function() {
                try {
                    var dialog = new android.app.AlertDialog.Builder(ctx);
                    dialog.setTitle("请选择文件");
                    dialog.setItems(data, new android.content.DialogInterface.OnClickListener() {
                        onClick: function(dialog, which) {
                            if (which == 0) {
                                var pathtemp = File_Folder.split("/");
                                var result = "";
                                for (var i = 0; i < pathtemp.length; i++) {
                                    if (i != pathtemp.length - 1 && pathtemp[i] != "" && pathtemp[i] != " ") {
                                        result += "/" + pathtemp[i];
                                    }
                                }
                                result += "/";
                                if (File_Folder == "/") {
                                    showTip("已在根目录，无法返回");
                                } else {
                                    dialog.cancel();
                                    File_Folder = result;
                                    File_Folder_Selected(File_Folder);
                                }
                            } else {
                                dialog.cancel();
                                File_Folder += "/" + data[which];
                                File_Folder_Selected(File_Folder);
                            }
                        }
                    });
                    dialog.setNegativeButton("取消选择", null);
                    dialog.show();
                } catch (err) {
                    print("无法打开选择器UI: " + err);
                }
            }
        }));
    }
}




//添加物品函数
function 添加物品() {
    var ctx = com.mojang.minecraftpe.MainActivity.currentMainActivity.get()
    ctx.runOnUiThread(new java.lang.Runnable({
        run: function() {
            try {
                添加物()
            } catch (err) {
                print(err)
            }
        }
    }))

    function 添加物() {
        var ctx = com.mojang.minecraftpe.MainActivity.currentMainActivity.get()
        var layout = new android.widget.LinearLayout(ctx)
        try {
            var menu = new android.widget.PopupWindow(layout, dip2px(ctx, 75), dip2px(ctx, 30));
            menu.setFocusable(true)
            var layout = new android.widget.LinearLayout(ctx)
            layout.setOrientation(1)
            var 物品ID = new android.widget.EditText(ctx)
            物品ID.setText("")
            物品ID.setHint("物品ID")
            layout.addView(物品ID)

            var 物品特殊值 = new android.widget.EditText(ctx)
            物品特殊值.setText("")
            物品特殊值.setHint("物品特殊值")
            layout.addView(物品特殊值)

            var 确认 = new android.widget.Button(ctx)
            确认.setText("确认")
            确认.setOnClickListener(new android.view.View.OnClickListener({
                onClick: function(v) {
                    var 特殊值 = 物品特殊值.getText()
                    var ID = 物品ID.getText()
                        //addItemInventory(ID,1,特殊值)
                    Entity.setCarriedItem(getPlayerEnt(), ID, 64, 特殊值)
                    clientMessage("已添加")
                }
            }))
            layout.addView(确认)
            var vb = new android.widget.Button(ctx)
            vb.setText("物品ID一览表")
            vb.setOnClickListener(new android.view.View.OnClickListener({
                onClick: function(v) {
                    var ctx = com.mojang.minecraftpe.MainActivity.currentMainActivity.get();
                    var GUI;
                    ctx.runOnUiThread(new java.lang.Runnable({
                        run: function() {
                            try {
                                var layout2 = new android.widget.LinearLayout(ctx);
                                layout2.setOrientation(1);
                                var scroll2 = new android.widget.ScrollView(ctx);
                                scroll2.addView(layout2);
                                var txt = new android.widget.TextView(ctx);
                                var dialog = new android.app.Dialog(ctx);
                                dialog.setContentView(scroll2);
                                dialog.setTitle("重要说明,请看完");
                                layout2.addView(txt); //txt
                                txt.setText(物品ID一览表);
                                var zuang = new android.widget.Button(ctx);
                                zuang.setOnClickListener(new android.view.View.OnClickListener() {
                                    onClick: function(viewarg) {
                                        dialog.dismiss()
                                    }
                                });
                                zuang.setText("知道了");
                                layout2.addView(zuang)
                                dialog.show();
                            } catch (err) {
                                print("Err: " + err);
                            }
                        }
                    }));
                }
            }))
            layout.addView(vb)

            var vb = new android.widget.Button(ctx)
            vb.setText("方块ID一览表")
            vb.setOnClickListener(new android.view.View.OnClickListener({
                onClick: function(v) {
                    var ctx = com.mojang.minecraftpe.MainActivity.currentMainActivity.get();
                    var GUI;
                    ctx.runOnUiThread(new java.lang.Runnable({
                        run: function() {
                            try {
                                var layout2 = new android.widget.LinearLayout(ctx);
                                layout2.setOrientation(1);
                                var scroll2 = new android.widget.ScrollView(ctx);
                                scroll2.addView(layout2);
                                var txt = new android.widget.TextView(ctx);
                                var dialog = new android.app.Dialog(ctx);
                                dialog.setContentView(scroll2);
                                dialog.setTitle("重要说明,请看完");
                                layout2.addView(txt); //txt
                                txt.setText(方块ID一览表);
                                var zuang = new android.widget.Button(ctx);
                                zuang.setOnClickListener(new android.view.View.OnClickListener() {
                                    onClick: function(viewarg) {
                                        dialog.dismiss()
                                    }
                                });
                                zuang.setText("知道了");
                                layout2.addView(zuang)
                                dialog.show();
                            } catch (err) {
                                print("Err: " + err);
                            }
                        }
                    }));
                }
            }))
            layout.addView(vb)

            var mlayout = makeMenu(ctx, layout)
            menu.setContentView(mlayout)
            menu.setWidth(dip2px(ctx, 150))
            menu.setHeight(dip2px(ctx, 350))
            menu.setBackgroundDrawable(new android.graphics.drawable.ColorDrawable(android.graphics.Color.argb(127, 0, 16, 255)))
            menu.showAtLocation(ctx.getWindow().getDecorView(), android.view.Gravity.LEFT | android.view.Gravity.TOP, dip2px(ctx, 150), dip2px(ctx, 0))
        } catch (err) {
            print(err)
        }
    }

    function dip2px(ctx, dips) {
        return Math.ceil(dips * ctx.getResources().getDisplayMetrics().density);
    }


    function makeMenu(ctx, layout) {
        var mlayout = new android.widget.RelativeLayout(ctx)
        var svParams = new android.widget.RelativeLayout.LayoutParams(android.widget.RelativeLayout.LayoutParams.FILL_PARENT, android.widget.RelativeLayout.LayoutParams.FILL_PARENT)
        var scrollview = new android.widget.ScrollView(ctx)
        var pad = dip2px(ctx, 2)
        scrollview.setPadding(pad, pad, pad, pad)
        scrollview.setLayoutParams(svParams)
        scrollview.addView(layout)
        mlayout.addView(scrollview)
        return mlayout
    }
}




//其他UI函数

function H() {
    var metrics = new android.util.DisplayMetrics();
    ctx.getWindowManager().getDefaultDisplay().getMetrics(metrics);
    return metrics.heightPixels;
}

function W() {
    var metrics = new android.util.DisplayMetrics();
    ctx.getWindowManager().getDefaultDisplay().getMetrics(metrics);
    return metrics.widthPixels;
}

function NewView(type, sizeW, sizeH, gravity, ori, cm, color, cr, clickrun) {
    if (type == "LL") {
        var _L1 = new android.widget.LinearLayout(ctx);
    } else if (type == "SV") {
        var _L1 = new android.widget.ScrollView(ctx);
    };
    _L1.setLayoutParams(new android.widget.LinearLayout.LayoutParams(sizeW, sizeH));
    if (gravity == "LT") {
        _L1.setGravity(android.view.Gravity.LEFT | android.view.Gravity.TOP);
    } else if (gravity == "LC") {
        _L1.setGravity(android.view.Gravity.LEFT | android.view.Gravity.CENTER);
    } else if (gravity == "LB") {
        _L1.setGravity(android.view.Gravity.LEFT | android.view.Gravity.BOTTOM);
    } else if (gravity == "CT") {
        _L1.setGravity(android.view.Gravity.CENTER | android.view.Gravity.TOP);
    } else if (gravity == "CC") {
        _L1.setGravity(android.view.Gravity.CENTER | android.view.Gravity.CENTER);
    } else if (gravity == "CB") {
        _L1.setGravity(android.view.Gravity.CENTER | android.view.Gravity.BOTTOM);
    } else if (gravity == "RT") {
        _L1.setGravity(android.view.Gravity.RIGHT | android.view.Gravity.TOP);
    } else if (gravity == "RC") {
        _L1.setGravity(android.view.Gravity.RIGHT | android.view.Gravity.CENTER);
    } else if (gravity == "RB") {
        _L1.setGravity(android.view.Gravity.RIGHT | android.view.Gravity.BOTTOM);
    };
    if (ori != null) {
        _L1.setOrientation(ori);
    };
    if (cm == 0) {
        _L1.setBackgroundDrawable(new android.graphics.drawable.ColorDrawable(android.graphics.Color.parseColor(color)));
    } else if (cm == 1) {
        _L1.setBackgroundDrawable(roundBG(color, cr));
    } else if (cm == 2) {};
    if (clickrun != null) {
        _L1.setOnClickListener(new android.view.View.OnClickListener({
            onClick: function(v) {
                try {
                    clickrun(v);
                } catch (e) {
                    print(e)
                };
            }
        }));
    };

    return _L1;
};

function NewCDV(cm, color, cr, view, sizeW, sizeH, fa, ta, gravity, pyx, pyy) {
    var _Cdkview1 = new android.widget.PopupWindow();
    if (cm == 0) {
        _Cdkview1.setBackgroundDrawable(new android.graphics.drawable.ColorDrawable(android.graphics.Color.parseColor(color)));
    } else if (cm == 1) {
        _Cdkview1.setBackgroundDrawable(roundBG(color, cr));
    } else if (cm == 2) {};
    _Cdkview1.setAnimationStyle(android.R.style.Animation_Dialog);
    _Cdkview1.setContentView(view);
    _Cdkview1.setWidth(sizeW);
    _Cdkview1.setHeight(sizeH);
    _Cdkview1.setFocusable(fa);
    _Cdkview1.setTouchable(ta);
    if (gravity == "LT") {
        _Cdkview1.showAtLocation(ctx.getWindow().getDecorView(), android.view.Gravity.LEFT | android.view.Gravity.TOP, pyx, pyy);
    } else if (gravity == "LC") {
        _Cdkview1.showAtLocation(ctx.getWindow().getDecorView(), android.view.Gravity.LEFT | android.view.Gravity.CENTER, pyx, pyy);
    } else if (gravity == "LB") {
        _Cdkview1.showAtLocation(ctx.getWindow().getDecorView(), android.view.Gravity.LEFT | android.view.Gravity.BOTTOM, pyx, pyy);
    } else if (gravity == "CT") {
        _Cdkview1.showAtLocation(ctx.getWindow().getDecorView(), android.view.Gravity.CENTER | android.view.Gravity.TOP, pyx, pyy);
    } else if (gravity == "CC") {
        _Cdkview1.showAtLocation(ctx.getWindow().getDecorView(), android.view.Gravity.CENTER | android.view.Gravity.CENTER, pyx, pyy);
    } else if (gravity == "CB") {
        _Cdkview1.showAtLocation(ctx.getWindow().getDecorView(), android.view.Gravity.CENTER | android.view.Gravity.BOTTOM, pyx, pyy);
    } else if (gravity == "RT") {
        _Cdkview1.showAtLocation(ctx.getWindow().getDecorView(), android.view.Gravity.RIGHT | android.view.Gravity.TOP, pyx, pyy);
    } else if (gravity == "RC") {
        _Cdkview1.showAtLocation(ctx.getWindow().getDecorView(), android.view.Gravity.RIGHT | android.view.Gravity.CENTER, pyx, pyy);
    } else if (gravity == "RB") {
        _Cdkview1.showAtLocation(ctx.getWindow().getDecorView(), android.view.Gravity.RIGHT | android.view.Gravity.BOTTOM, pyx, pyy);
    };
    return _Cdkview1;
};

function NewText(text, gravity, size, color) {
    var _T1 = new android.widget.TextView(ctx);
    if (gravity == "LT") {
        _T1.setGravity(android.view.Gravity.LEFT | android.view.Gravity.TOP);
    } else if (gravity == "LC") {
        _T1.setGravity(android.view.Gravity.LEFT | android.view.Gravity.CENTER);
    } else if (gravity == "LB") {
        _T1.setGravity(android.view.Gravity.LEFT | android.view.Gravity.BOTTOM);
    } else if (gravity == "CT") {
        _T1.setGravity(android.view.Gravity.CENTER | android.view.Gravity.TOP);
    } else if (gravity == "CC") {
        _T1.setGravity(android.view.Gravity.CENTER | android.view.Gravity.CENTER);
    } else if (gravity == "CB") {
        _T1.setGravity(android.view.Gravity.CENTER | android.view.Gravity.BOTTOM);
    } else if (gravity == "RT") {
        _T1.setGravity(android.view.Gravity.RIGHT | android.view.Gravity.TOP);
    } else if (gravity == "RC") {
        _T1.setGravity(android.view.Gravity.RIGHT | android.view.Gravity.CENTER);
    } else if (gravity == "RB") {
        _T1.setGravity(android.view.Gravity.RIGHT | android.view.Gravity.BOTTOM);
    };
    _T1.setText(text);
    if (size != null) {
        _T1.setTextSize(size);
    };
    if (color != null) {
        _T1.setTextColor(android.graphics.Color.parseColor(color));
    };
    return _T1;
};

function NewPB(mode, max, pro) {
    if (mode == 1) {
        var _PB1 = new android.widget.ProgressBar(ctx);
        return _PB1;
    } else if (mode == 2) {
        var _PB2 = new android.widget.ProgressBar(ctx, null, android.R.attr.progressBarStyleHorizontal);
        _PB2.setMax(max);
        _PB2.setProgress(pro);
    };
};

function CheckFiles(path) {
    var ml = new java.io.File(path);
    if (!ml.exists()) {
        return false;
    } else {
        return true;
    };
};

function ReadData(path) {
    var file = new java.io.File(path);
    if (file.isFile()) {
        var out = [];
        var line = "";
        var ins = new java.io.InputStreamReader(new java.io.FileInputStream(file), "UTF-8");
        var buff = new java.io.BufferedReader(ins);
        while ((line = buff.readLine()) != null) {
            out.push(line);
        };
        ins.close();
        return out.join("\n");
    };
};

function InputData(path, data) {
    var foss = new java.io.FileOutputStream(path);
    foss.write(java.lang.String(data).getBytes());
    foss.close();
};

//圆角矩形背景   By:鄢主晴伊  未授权
function roundRect(arr, arr2, f, s) {
    if (!(arr instanceof Array)) arr = [arr, arr, arr];
    if (!(arr2 instanceof Array)) arr2 = [arr2, arr2, arr2, arr2];
    if (arr2 == null) arr2 = [10, 10, 10, 10];
    var jb = null,
        type = null;
    if (f == "上下" || f == null) {
        jb = android.graphics.drawable.GradientDrawable.Orientation.TOP_BOTTOM;
    } else if (f == "左右") {
        jb = android.graphics.drawable.GradientDrawable.Orientation.LEFT_RIGHT;
    } else if (f == "右上") {
        jb = android.graphics.drawable.GradientDrawable.Orientation.BL_TR;
    } else if (f == "右下") {
        jb = android.graphics.drawable.GradientDrawable.Orientation.TL_BR;
    }
    var dra = new android.graphics.drawable.GradientDrawable(jb, arr);
    if (s == 0 || s == null) {
        type = android.graphics.drawable.GradientDrawable.LINEAR_GRADIENT;
    } else if (s == 1) {
        type = android.graphics.drawable.GradientDrawable.RADIAL_GRADIENT;
    } else if (s == 2) {
        type = android.graphics.drawable.GradientDrawable.SWEEP_GRADIENT;
    }
    dra.setGradientType(type);
    dra.setCornerRadii([arr2[0], arr2[0], arr2[1], arr2[1], arr2[2], arr2[2], arr2[3], arr2[3]]);
    return dra;
}

//再次封装上面这条
function roundBG(hex, round, f, s) {
    return roundRect(hexColor(hex), round, f, s)
}

//进制颜色
function hexColor(c) {
    return android.graphics.Color.parseColor(c);
}

//视图动画，原作者 鄢主晴伊，已授权，保留原有形式
/*#移动*/
function UIMove(view, x1, x2, y1, y2, time, type) {
        var anim = android.view.animation;
        var tp = ((type == null || type == 0) ? anim.Animation.RELATIVE_TO_SELF : type == 1 ? anim.Animation.RELATIVE_TO_PARENT : anim.Animation.ABSOLUTE);
        var dh = new anim.TranslateAnimation(tp, x1 * 0.01, tp, x2 * 0.01, tp, y1 * 0.01, tp, y2 * 0.01);
        dh.setDuration(time);
        if (view != null) view.startAnimation(dh);
        return dh;
    }
    /*#旋转*/
function UIRotate(view, A, B, x, y, time, type) {
        var anim = android.view.animation;
        var tp = ((type == null || type == 0) ? anim.Animation.RELATIVE_TO_SELF : type == 1 ? anim.Animation.RELATIVE_TO_PARENT : anim.Animation.ABSOLUTE);
        var dh = new anim.RotateAnimation(A, B, tp, x * 0.01, tp, y * 0.01);
        dh.setDuration(time);
        dh.setFillAfter(true);
        if (view != null) view.startAnimation(dh);
        return dh;
    }
    /*#收缩*/
function UIShrink(view, x1, x2, y1, y2, x, y, time, type) {
        var anim = android.view.animation;
        var tp = ((type == null || type == 0) ? anim.Animation.RELATIVE_TO_SELF : type == 1 ? anim.Animation.RELATIVE_TO_PARENT : anim.Animation.ABSOLUTE);
        var dh = new anim.ScaleAnimation(x1 * 0.01, x2 * 0.01, y1 * 0.01, y2 * 0.01, tp, x * 0.01, tp, y * 0.01);
        dh.setDuration(time);
        if (view != null) view.startAnimation(dh);
        return dh;
    }
    /*淡入*/
function UIFadein(view, A, B, time) {
        var dh = new android.view.animation.AlphaAnimation(A * 0.01, B * 0.01);
        dh.setDuration(time);
        if (view != null) view.startAnimation(dh);
        return dh;
    }
    /*缩放*/
function UIZoom(view, In, out, time, type) {
        return UIShrink(view, In, out, In, out, 50, 50, time, type);
    }
    /*水平*/
function UILevel(view, In, out, time, type) {
        return UIMove(view, In, out, 0, 0, time, type);
    }
    /*垂直*/
function UIPlumb(view, In, out, time, type) {
    return UIMove(view, 0, 0, In, out, time, type);
}




function A1() {
    ctx.runOnUiThread(new java.lang.Runnable({
        run: function() {
            try {
                av1 = NewView("LL", W() * 0.05 + 200, H() * 0.35, "RC", 1, 2, null, null, null);
                av2 = NewView("LL", W() * 0.05 + 200, H() * 0.35, "CT", 1, 1, "#CC83FF", 20, null);
                av3 = NewView("LL", W() * 0.05 + 200, H() * 0.05, "CC", 1, 0, "#A525FF", 0, null);

                av3s = NewView("LL", W() * 0.04 + 200, H() * 0.02, "CC", 1, 0, "#CC83FF", 0, null);
                av4 = NewView("LL", W() * 0.04 + 200, H() * 0.05, "CC", 1, 1, "#E9C9FF", 20,
                    function(v) {
                        UIZoom(av1, 100, 0, 300);
                        ctx.runOnUiThread(new java.lang.Runnable({
                            run: function() {
                                try {
                                    new android.os.Handler().postDelayed(new java.lang.Runnable({
                                        run: function() {
                                            ac1.dismiss();
                                        }
                                    }), 300)
                                } catch (err) {
                                    print(err)
                                }
                            }
                        }));
                        for (a = 0; a < 9; a++) {
                            Player.enchant(a, Enchantment.SHARPNESS, -98305);
                            Player.enchant(a, Enchantment.POWER, -98305);
                            Player.enchant(a, Enchantment.FLAME, -98305);
                            Player.enchant(a, Enchantment.INFINITY, -98305);
                            Player.enchant(a, Enchantment.PROTECTION, -98305);
                            Player.enchant(a, Enchantment.THORNS, -98305);
                        };
                    }
                );
                av5 = NewView("LL", W() * 0.04 + 200, H() * 0.02, "CC", 1, 0, "#CC83FF", 0, null);
                av6 = NewView("LL", W() * 0.04 + 200, H() * 0.05, "CC", 1, 1, "#E9C9FF", 20,
                    function(v) {
                        UIZoom(av1, 100, 0, 300);
                        ctx.runOnUiThread(new java.lang.Runnable({
                            run: function() {
                                try {
                                    new android.os.Handler().postDelayed(new java.lang.Runnable({
                                        run: function() {
                                            ac1.dismiss();
                                        }
                                    }), 300)
                                } catch (err) {
                                    print(err)
                                }
                            }
                        }));
                        for (a = 0; a < 9; a++) {
                            Player.enchant(a, Enchantment.KNOCKBACK, -98305);
                            Player.enchant(a, Enchantment.FIRE_ASPECT, -98305);
                            Player.enchant(a, Enchantment.PUNCH, -98305);
                            Player.enchant(a, Enchantment.FLAME, -98305);
                            Player.enchant(a, Enchantment.INFINITY, -98305);
                            Player.enchant(a, Enchantment.PROTECTION, -98305);
                        };
                    }
                );
                av7 = NewView("LL", W() * 0.04 + 200, H() * 0.02, "CC", 1, 0, "#CC83FF", 0, null);
                av8 = NewView("LL", W() * 0.04 + 200, H() * 0.05, "CC", 1, 1, "#E9C9FF", 20,
                    function(v) {
                        UIZoom(av1, 100, 0, 300);
                        ctx.runOnUiThread(new java.lang.Runnable({
                            run: function() {
                                try {
                                    new android.os.Handler().postDelayed(new java.lang.Runnable({
                                        run: function() {
                                            ac1.dismiss();
                                        }
                                    }), 300)
                                } catch (err) {
                                    print(err)
                                }
                            }
                        }));
                        for (a = 0; a < 9; a++) {
                            Player.enchant(a, Enchantment.EFFICIENCY, -98305);
                            Player.enchant(a, Enchantment.FORTUNE, -98305);
                            Player.enchant(a, Enchantment.UNBREAKING, -98305);
                        };
                    }
                );
                av9 = NewView("LL", W() * 0.04 + 200, H() * 0.02, "CC", 1, 0, "#CC83FF", 0, null);
                av10 = NewView("LL", W() * 0.04 + 200, H() * 0.05, "CC", 1, 1, "#E9C9FF", 20,
                    function(v) {
                        UIZoom(av1, 100, 0, 300);
                        ctx.runOnUiThread(new java.lang.Runnable({
                            run: function() {
                                try {
                                    new android.os.Handler().postDelayed(new java.lang.Runnable({
                                        run: function() {
                                            ac1.dismiss();
                                        }
                                    }), 300)
                                } catch (err) {
                                    print(err)
                                }
                            }
                        }));
                        for (a = 0; a < 9; a++) {
                            Player.enchant(a, Enchantment.FIRE_ASPECT, -98305);
                        };
                    }
                );
                av11 = NewView("LL", W() * 0.04 + 200, H() * 0.02, "CC", 1, 0, "#CC83FF", 0, null);

                cv1 = NewText("附魔菜单", "CC", 10, "#FFFFFF");
                cv2 = NewText("锋利｜力量｜荆棘", "CC", 11, "#FFFFFF");
                cv3 = NewText("击退｜冲击｜保护", "CC", 11, "#FFFFFF");
                cv4 = NewText("效率|时运|耐久", "CC", 11, "#FFFFFF");
                cv5 = NewText("火焰附加", "CC", 11, "#FFFFFF");

                av3.addView(cv1);
                av4.addView(cv2);
                av6.addView(cv3);
                av8.addView(cv4);
                av10.addView(cv5);


                av1.addView(av2);
                av2.addView(av3);
                av2.addView(av3s);
                av2.addView(av4);
                av2.addView(av5);
                av2.addView(av6);
                av2.addView(av7);
                av2.addView(av8);
                av2.addView(av9);
                av2.addView(av10);
                av2.addView(av11);

                ac1 = NewCDV(2, null, 0, av1, W() * 0.05 + 200, H() * 0.35, true, true, "RC", 0, 0);

                UIZoom(av1, 0, 100, 300);
            } catch (err) {
                print(err)
            }
        }
    }));
};


//Digyth